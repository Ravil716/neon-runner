<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Neon Runner</title>
    <link rel="stylesheet" href="style.css" />

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
    // –°–æ–æ–±—â–∞–µ–º –¢–µ–ª–µ–≥—Ä–∞–º—É, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∏ –µ–≥–æ –Ω—É–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å
    window.Telegram.WebApp.ready();
    window.Telegram.WebApp.expand();
    
    // –ü–æ–∫—Ä–∞—Å–∏–º —à–∞–ø–∫—É –¢–µ–ª–µ–≥—Ä–∞–º–∞ –≤ —á–µ—Ä–Ω—ã–π —Ü–≤–µ—Ç, —á—Ç–æ–±—ã —Å–ª–∏–≤–∞–ª–∞—Å—å —Å –∏–≥—Ä–æ–π
    window.Telegram.WebApp.setHeaderColor('#000000'); 
    window.Telegram.WebApp.setBackgroundColor('#000000');
</script>
<style>
    /* –£–±–∏—Ä–∞–µ–º —Å–∫—Ä–æ–ª–ª –∏ –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ */
    body {
        overflow: hidden; 
        user-select: none;
        -webkit-user-select: none;
        touch-action: none;
    }
</style>

  </head>
  <body>
    <div class="page-wrapper">
      <div class="game-shell">
        <header class="game-header">
          <h1 class="game-title">Neon Runner</h1>
          <div class="hud-right">
            <div class="score-display">
              <span class="score-label">Score</span>
              <span id="scoreValue">0</span>
            </div>
            <div class="coin-display" title="Coins (—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è)">
              <span class="coin-icon" aria-hidden="true"></span>
              <span id="coinValue">0</span>
            </div>
            <button id="bankButton" class="bank-button" type="button" title="–ö—É–ø–∏—Ç—å –º–æ–Ω–µ—Ç—ã">
              +
            </button>
            <button id="shopButton" class="icon-button" type="button" title="–ú–∞–≥–∞–∑–∏–Ω —Å–∫–∏–Ω–æ–≤">
              üõí
            </button>
          <button id="leaderboardButton" class="icon-button" type="button" title="Leaderboard">
            üèÜ
          </button>
        </header>

        <main class="game-main">
          <canvas id="gameCanvas"></canvas>

          <div id="gameOverOverlay" class="overlay hidden">
            <div class="overlay-content">
              <h2>Game Over</h2>
              <p class="final-score">
                –í–∞—à —Å—á—ë—Ç: <span id="finalScoreValue">0</span>
              </p>
              <p class="final-coins">
                –°–æ–±—Ä–∞–Ω–æ –∑–∞ —Ä–∞—É–Ω–¥: <span id="roundCoinsValue">0</span>
              </p>
              <p class="final-coins">
                –í—Å–µ–≥–æ –º–æ–Ω–µ—Ç: <span id="totalCoinsValue">0</span>
              </p>
              <button id="restartButton" class="btn-primary">Restart</button>
              <p class="hint">–ù–∞–∂–º–∏—Ç–µ –ø—Ä–æ–±–µ–ª –∏–ª–∏ —Ç–∞–ø–Ω–∏—Ç–µ, —á—Ç–æ–±—ã –ø—Ä—ã–≥–∞—Ç—å</p>
            </div>
          </div>

          <div id="shopOverlay" class="overlay hidden">
            <div class="overlay-content shop-content">
              <div class="shop-header-row">
                <h2>–ú–∞–≥–∞–∑–∏–Ω —Å–∫–∏–Ω–æ–≤</h2>
                <button id="shopCloseButton" class="icon-button icon-button--ghost" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω">
                  ‚úï
                </button>
              </div>
              <p class="shop-subtitle">
                –¢—Ä–∞—Ç—å—Ç–µ –Ω–µ–æ–Ω–æ–≤—ã–µ –º–æ–Ω–µ—Ç—ã –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ–±–ª–∏–∫–∏ –∫—É–±–∞
              </p>
              <div id="shopGrid" class="shop-grid"></div>
            </div>
          </div>

          <div id="bankOverlay" class="overlay hidden">
            <div class="overlay-content bank-content">
              <div class="shop-header-row">
                <h2>Bank</h2>
                <button id="bankCloseButton" class="icon-button icon-button--ghost" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å –±–∞–Ω–∫">
                  ‚úï
                </button>
              </div>
              <p class="shop-subtitle">
                –ö—É–ø–∏—Ç–µ –º–æ–Ω–µ—Ç—ã –∑–∞ Telegram Stars ‚≠ê
              </p>
              <div id="bankGrid" class="bank-grid"></div>
            </div>
          </div>

          <div id="tapHint" class="tap-hint">
            –ù–∞–∂–º–∏—Ç–µ –ø—Ä–æ–±–µ–ª –∏–ª–∏ —Ç–∞–ø–Ω–∏—Ç–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å
          </div>

          <div id="leaderboardOverlay" class="overlay hidden">
            <div class="overlay-content leaderboard-content">
              <div class="shop-header-row">
                <h2>Leaderboard</h2>
                <button id="leaderboardCloseButton" class="icon-button icon-button--ghost" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å –ª–∏–¥–µ—Ä–±–æ—Ä–¥">
                  ‚úï
                </button>
              </div>
              <div class="leaderboard-container">
                <table class="leaderboard-table">
                  <thead>
                    <tr>
                      <th>Place</th>
                      <th>Username</th>
                      <th>Score</th>
                    </tr>
                  </thead>
                  <tbody id="leaderboardBody">
                    <!-- Will be populated by JS -->
                  </tbody>
                </table>
                <div class="loading-indicator" id="leaderboardLoading">Loading...</div>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>

